---
import Layout from '../layouts/Layout.astro';
import SearchModal from '../components/SearchModal.astro';
import ProductList from '../components/ProductList.astro';
import FilterAside from '../components/FilterAside.astro';
---

<Layout title="Vanilla Shop Web">
    <main class="container main-section">
        <FilterAside/>
        <ProductList/>
    </main>
    <SearchModal/>
    <footer></footer>
</Layout>

<script>
    import { updateProducts } from "../services/updateProducts";
    import { filterCategory } from "../stores/filterCategory";
    import { filterStars } from "../stores/filterStars";
    import { filterPrice } from "../stores/price";
    import { searchQuery } from "../stores/search";
    
    updateProducts()
    searchQuery.subscribe(_ => updateProducts())
    filterPrice.subscribe(_ => updateProducts())
    filterCategory.subscribe(_ => updateProducts())
    filterStars.subscribe(_ => updateProducts())
</script>

<style>
    .main-section {
        display: flex;
        flex-direction: row;
        gap: 1rem;
    }
</style>